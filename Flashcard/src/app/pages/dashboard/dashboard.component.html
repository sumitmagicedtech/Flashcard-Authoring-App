<div class="filter-bar">
  <!-- Category Filter -->
  <mat-form-field appearance="outline">
    <mat-label>Category</mat-label>
    <mat-select [(value)]="filters.category" (selectionChange)="applyFilter()">
      <mat-option *ngFor="let category of categories" [value]="category">{{
        category
      }}</mat-option>
    </mat-select>
  </mat-form-field>

  <!-- Sub Category Filter -->
  <mat-form-field appearance="outline">
    <mat-label>Sub Category</mat-label>
    <mat-select
      [(value)]="filters.subCategory"
      (selectionChange)="applyFilter()"
    >
      <mat-option
        *ngFor="let subCategory of subCategories"
        [value]="subCategory"
        >{{ subCategory }}</mat-option
      >
    </mat-select>
  </mat-form-field>

  <!-- Subject Filter -->
  <mat-form-field appearance="outline">
    <mat-label>Subject</mat-label>
    <mat-select [(value)]="filters.subject" (selectionChange)="applyFilter()">
      <mat-option *ngFor="let subject of subjects" [value]="subject">{{
        subject
      }}</mat-option>
    </mat-select>
  </mat-form-field>

  <!-- Difficulty Filter -->
  <mat-form-field appearance="outline">
    <mat-label>Difficulty</mat-label>
    <mat-select
      [(value)]="filters.difficulty"
      (selectionChange)="applyFilter()"
    >
      <mat-option
        *ngFor="let difficulty of difficulties"
        [value]="difficulty"
        >{{ difficulty }}</mat-option
      >
    </mat-select>
  </mat-form-field>

  <!-- Reset Filters Button -->
  <button mat-raised-button (click)="resetFilters()">Reset Filters</button>
</div>

<!-- Table with Filtered Data -->

<!-- Table with Filtered Data -->
<div class="dashboard-table">
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
    <!-- Sr. No. -->
    <ng-container matColumnDef="srNo">
      <th mat-header-cell *matHeaderCellDef>Sr. No.</th>
      <td mat-cell *matCellDef="let card; let i = index">{{ i + 1 }}</td>
    </ng-container>

    <!-- Title -->
    <ng-container matColumnDef="title">
      <th mat-header-cell *matHeaderCellDef>Title</th>
      <td mat-cell *matCellDef="let card">{{ card.title }}</td>
    </ng-container>

    <!-- Category -->
    <ng-container matColumnDef="category">
      <th mat-header-cell *matHeaderCellDef>Category</th>
      <td mat-cell *matCellDef="let card">{{ card.tags.category }}</td>
    </ng-container>

    <!-- Sub Category -->
    <ng-container matColumnDef="subCategory">
      <th mat-header-cell *matHeaderCellDef>Sub Category</th>
      <td mat-cell *matCellDef="let card">{{ card.tags.subCategory }}</td>
    </ng-container>

    <!-- Subject -->
    <ng-container matColumnDef="subject">
      <th mat-header-cell *matHeaderCellDef>Subject</th>
      <td mat-cell *matCellDef="let card">{{ card.tags.subject }}</td>
    </ng-container>

    <!-- Difficulty -->
    <ng-container matColumnDef="difficulty">
      <th mat-header-cell *matHeaderCellDef>Difficulty</th>
      <td mat-cell *matCellDef="let card">{{ card.difficulty }}</td>
    </ng-container>

    <!-- Action -->
    <!-- Action -->
    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef>Action</th>
      <td mat-cell *matCellDef="let card">
        <div class="action-buttons">
          <button
            mat-raised-button
            class="view-button"
            (click)="viewCard(card.id)"
          >
            View
          </button>
          <button
            mat-raised-button
            class="delete-button"
            (click)="deleteCard(card.id)"
          >
            Delete
          </button>
        </div>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>

  <!-- Paginator -->
  <mat-paginator
    class="paginator"
    [length]="filteredFlashcards.length"
    [pageSize]="pageSize"
    [pageSizeOptions]="[5, 10, 25, 100]"
    (page)="onPageChange($event)"
    aria-label="Select page"
  >
  </mat-paginator>

  <p *ngIf="filteredFlashcards.length === 0">No flashcards found.</p>
</div>
